(this["webpackJsonpcheck-splitter"]=this["webpackJsonpcheck-splitter"]||[]).push([[0],{83:function(e,t,n){e.exports=n(94)},94:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),l=n(8),o=n.n(l),c=n(22),s=n(150),u=n(151),m=n(152),p=n(145),h=n(49),d=n(153),f=n(143),v=n(74),E=n.n(v),g=n(131),b=n(4),y=n(158),k=n(130),x=n(95),w=n(132),O=n(133),S=n(134),j=n(135),P=n(136),N=n(14),T=n(34),I=n(35);function C(e){switch(e){case a.Percentage:return"Percentage";case a.SplitEqually:return"Split Equally";case a.SplitProportionally:return"Split Proportionally"}}!function(e){e[e.Percentage=0]="Percentage",e[e.SplitEqually=1]="SplitEqually",e[e.SplitProportionally=2]="SplitProportionally"}(a||(a={}));var A,R=function(){function e(t){Object(T.a)(this,e),this.person=void 0,this.expenses=void 0,this.total=void 0,this.person=t,this.expenses=[],this.total=0}return Object(I.a)(e,[{key:"getCurrentTotalPrice",value:function(){return this.person.basePrice+this.expenses.reduce((function(e,t){return e+t}),0)}},{key:"addExpense",value:function(e,t,n,r){switch(t){case a.Percentage:this.expenses.push(e*this.getCurrentTotalPrice()/100);break;case a.SplitEqually:this.expenses.push(e/n);break;case a.SplitProportionally:var i=this.person.basePrice/r;this.expenses.push(i*e)}}},{key:"finalize",value:function(){this.total=this.getCurrentTotalPrice()}}]),e}(),W=function(e){return e.people},D=function(e){return e.expenses.expenses},q=Object(b.a)((function(e){return Object(y.a)({head:{backgroundColor:e.palette.secondary.main,color:e.palette.common.white}})}))(k.a),L=Object(g.a)((function(e){return{root:{width:"100%",marginBottom:e.spacing(2)},table:{maxHeight:"50vh"}}})),_=function(){var e=L(),t=Object(N.c)(W),n=Object(N.c)(D),a=function(e,t){var n=e.length,a=e.map((function(e){return e.basePrice})).reduce((function(e,t){return e+t}),0);return e.map((function(e){var r=new R(e),i=!0,l=!1,o=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;r.addExpense(u.payload,u.kind,n,a)}}catch(m){l=!0,o=m}finally{try{i||null==s.return||s.return()}finally{if(l)throw o}}return r.finalize(),r}))}(t,n);return i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement(w.a,{className:e.table},i.a.createElement(O.a,{stickyHeader:!0},i.a.createElement(S.a,null,i.a.createElement(j.a,null,i.a.createElement(q,{align:"left"},"Name"),i.a.createElement(q,{align:"right"},"Base Price"),n.map((function(e,t){return i.a.createElement(q,{align:"right",key:t},e.name)})),i.a.createElement(q,{align:"right"},"Total"))),i.a.createElement(P.a,null,a.map((function(e,t){return i.a.createElement(j.a,{key:t},i.a.createElement(k.a,{align:"left"},e.person.name),i.a.createElement(k.a,{align:"right"},e.person.basePrice.toFixed(2)),e.expenses.map((function(e,t){return i.a.createElement(k.a,{align:"right",key:t},e.toFixed(2))})),i.a.createElement(k.a,{align:"right"},e.total.toFixed(2)))}))))))},B=n(25),F=n(159),U=n(70),z=n.n(U),M=n(137),H=n(67),J=n.n(H),X=function(){return i.a.createElement(M.a,{color:"primary",variant:"contained",size:"large",type:"submit",startIcon:i.a.createElement(J.a,null)},"Add")},$=Object(g.a)((function(e){return{root:{padding:e.spacing(2)},headerIcon:{marginRight:e.spacing(1)},header:{display:"flex",alignItems:"center"}}})),V=function(e){var t=e.title,n=e.Icon,a=e.handleSubmit,r=e.children,l=$();return i.a.createElement(x.a,{elevation:3,className:l.root},i.a.createElement("div",{className:l.header},i.a.createElement(n,{fontSize:"large",className:l.headerIcon}),i.a.createElement(h.a,{variant:"h5"},t)),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&a(e)}},r,i.a.createElement(X,null)))},G={counter:0,expenses:[]},K=n(142),Q=function(e){var t=e.label,n=e.name,a=e.percentage,r=e.value,l=e.handleChange,o=function(e){var t=parseFloat(e.target.value);isNaN(t)&&(t=void 0),l(t)};return a?i.a.createElement(F.a,{label:t,variant:"outlined",margin:"normal",name:n,fullWidth:!0,InputProps:{endAdornment:i.a.createElement(K.a,{position:"end"},"%")},InputLabelProps:{shrink:!0},type:"number",inputProps:{min:0,max:100},value:r||"",onChange:o}):i.a.createElement(F.a,{label:t,variant:"outlined",margin:"normal",name:n,value:r||"",fullWidth:!0,InputProps:{startAdornment:i.a.createElement(K.a,{position:"start"},"$")},type:"number",onChange:o})},Y=function(e){var t=e.title,n=e.editId,a=Object(r.useState)({name:""}),l=Object(c.a)(a,2),o=l[0],s=l[1],u=Object(N.b)();return i.a.createElement(V,{title:t,Icon:z.a,handleSubmit:function(){var e,t;""!==o.name&&o.basePrice&&o.basePrice>0&&(n?console.log("Edit dispatch: "+n):u((e=o.name,t=o.basePrice,{type:"ADD_PERSON",name:e,basePrice:t})),s({name:"",basePrice:void 0}))}},i.a.createElement(F.a,{label:"Name",variant:"outlined",margin:"normal",name:"name",value:o.name,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target.value;s((function(e){return Object(B.a)({},e,{name:t})}))}}),i.a.createElement(Q,{label:"Base Price",name:"basePrice",value:o.basePrice,handleChange:function(e){s((function(t){return Object(B.a)({},t,{basePrice:e})}))}}))},Z=function(){return i.a.createElement(Y,{title:"Add a new person"})},ee=n(46),te=n(140),ne=n(161),ae=n(154),re=n(144),ie=n(71),le=n.n(ie),oe=Object(g.a)((function(e){return{formRow:{display:"flex",justifyContent:"space-between"},formRowItemLeft:Object(ee.a)({},e.breakpoints.up("sm"),{paddingRight:e.spacing(1)}),formRowItemRight:Object(ee.a)({},e.breakpoints.up("sm"),{paddingLeft:e.spacing(1)})}})),ce=function(){var e=oe(),t=Object(r.useState)({name:"",kind:a.SplitEqually}),n=Object(c.a)(t,2),l=n[0],o=n[1],s=Object(N.b)();return i.a.createElement(V,{title:"Add a new expense",Icon:le.a,handleSubmit:function(){var e,t,n;""!==l.name&&l.payload&&l.payload>0&&(s((e=l.name,t=l.kind,n=l.payload,{type:"ADD_EXPENSE",name:e,kind:t,payload:n})),o({name:"",kind:a.SplitEqually,payload:void 0}))}},i.a.createElement(F.a,{label:"Name",name:"name",variant:"outlined",margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.name,onChange:function(e){if(e.target){var t=e.target.value;o((function(e){return Object(B.a)({},e,{name:t})}))}}}),i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,xs:12,sm:6,className:e.formRowItemLeft},i.a.createElement(te.a,{margin:"normal",fullWidth:!0},i.a.createElement(ne.a,{id:"kind-select-label",variant:"outlined"},"Kind"),i.a.createElement(ae.a,{labelId:"kind-select-label",labelWidth:40,fullWidth:!0,value:l.kind,variant:"outlined",onChange:function(e){var t=e.target.value;o((function(e){return Object(B.a)({},e,{kind:t})}))}},i.a.createElement(re.a,{value:a.Percentage},"Percentage"),i.a.createElement(re.a,{value:a.SplitEqually},"Split equally"),i.a.createElement(re.a,{value:a.SplitProportionally},"Split proportionally")))),i.a.createElement(f.a,{item:!0,xs:12,sm:6,className:e.formRowItemRight},i.a.createElement(Q,{label:"Price",name:"price",percentage:l.kind===a.Percentage,value:l.payload,handleChange:function(e){o((function(t){return Object(B.a)({},t,{payload:e})}))}}))))},se=n(72),ue=n.n(se),me=n(53),pe=n.n(me),he=n(157),de=n(146),fe=n(141),ve=n(96),Ee=n(147),ge=n(148),be=Object(g.a)((function(e){return{drawerHeader:Object(B.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"})}})),ye=function(e){var t=e.open,n=e.closeCallback,a=be(),r=Object(N.b)();return i.a.createElement(he.a,{open:t},i.a.createElement("div",{className:a.drawerHeader},i.a.createElement(p.a,{onClick:n},i.a.createElement(ue.a,null))),i.a.createElement(de.a,null),i.a.createElement(fe.a,null,i.a.createElement(ve.a,{button:!0,onClick:function(){r({type:"RESET_STATE"}),n()}},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,null)),i.a.createElement(ge.a,{primary:"Reset"}))))},ke=n(149),xe=Object(g.a)((function(e){return{root:{marginTop:e.spacing(2)}}})),we=function(e){var t=e.expense,n=t.kind===a.Percentage?"".concat(t.payload,"%"):"$".concat(t.payload),r="".concat(t.name," - ").concat(n),l=Object(N.b)();return i.a.createElement(ve.a,null,i.a.createElement(ge.a,{primary:r,secondary:C(t.kind)}),i.a.createElement(ke.a,null,i.a.createElement(p.a,{edge:"end",onClick:function(){l({type:"REMOVE_EXPENSE",id:t.id})}},i.a.createElement(pe.a,null))))},Oe=function(){var e=xe(),t=Object(N.c)(D);return 0===t.length?null:i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement(fe.a,null,t.map((function(e){return i.a.createElement(we,{expense:e,key:e.id})}))))},Se=n(160),je=n(73),Pe=n.n(je);!function(e){e[e.Number=0]="Number",e[e.Symbol=1]="Symbol",e[e.Operator=2]="Operator"}(A||(A={}));var Ne=/^\d+(\.\d+)?/,Te=function(){function e(t){Object(T.a)(this,e),this.input=void 0,this.currentIndex=void 0,this.bufferToken=void 0,this.input=t,this.currentIndex=0}return Object(I.a)(e,[{key:"currentChar",value:function(){return this.input[this.currentIndex]}},{key:"eatWhitespaces",value:function(){for(;this.currentIndex<this.input.length&&0===this.currentChar().trim().length;)this.currentIndex+=1}},{key:"innerNextToken",value:function(){if(this.eatWhitespaces(),this.currentIndex>=this.input.length)return null;var e=this.currentChar();if("("===e||")"===e)return this.currentIndex+=1,{type:A.Symbol,value:e};if("+"===e||"-"===e||"*"===e||"/"===e)return this.currentIndex+=1,{type:A.Operator,value:e};var t=this.input.substring(this.currentIndex).match(Ne);if(t){var n=t[0];this.currentIndex+=n.length;var a=parseFloat(n);return{type:A.Number,value:a}}throw new Error("Unknown character in input string: '".concat(e,"'"))}},{key:"nextToken",value:function(){if(this.bufferToken){var e=this.bufferToken;return this.bufferToken=void 0,e}return this.innerNextToken()}},{key:"peekToken",value:function(){if(this.bufferToken)return this.bufferToken;var e=this.innerNextToken();return e&&(this.bufferToken=e),e}},{key:"advance",value:function(){this.nextToken()}}]),e}(),Ie=function(){function e(t,n,a){Object(T.a)(this,e),this.lhs=void 0,this.rhs=void 0,this.op=void 0,this.lhs=t,this.rhs=n,this.op=a}return Object(I.a)(e,[{key:"value",value:function(){switch(this.op){case"*":return this.lhs.value()*this.rhs.value();case"+":return this.lhs.value()+this.rhs.value();case"-":return this.lhs.value()-this.rhs.value();case"/":return this.lhs.value()/this.rhs.value()}}}]),e}(),Ce=function(){function e(t){Object(T.a)(this,e),this.literal=void 0,this.literal=t}return Object(I.a)(e,[{key:"value",value:function(){return this.literal}}]),e}(),Ae=function(){function e(t){Object(T.a)(this,e),this.lexer=void 0,this.lexer=t}return Object(I.a)(e,[{key:"expect",value:function(e,t){var n=this.lexer.nextToken();if(!n||n.type!==e||n.value!==t)throw new Error("Unexpected token")}},{key:"parseExpression",value:function(){return this.lexer.peekToken()?this.parseAddExpression():null}},{key:"parseParenthesisExpression",value:function(){this.expect(A.Symbol,"(");var e=this.parseExpression();if(!e)throw new Error("Unexpected EOL");return this.expect(A.Symbol,")"),e}},{key:"parseAddExpression",value:function(){for(var e=this.parseMulExpression();;){var t=this.lexer.peekToken();if(!t||t.type!==A.Operator||"+"!==t.value&&"-"!==t.value)break;this.lexer.advance();var n=this.parseMulExpression();e=new Ie(e,n,t.value)}return e}},{key:"parseMulExpression",value:function(){for(var e=this.parseAtom();;){var t=this.lexer.peekToken();if(!t||t.type!==A.Operator||"*"!==t.value&&"/"!==t.value)break;this.lexer.advance();var n=this.parseAtom();e=new Ie(e,n,t.value)}return e}},{key:"parseAtom",value:function(){var e=this.lexer.peekToken();if(!e)throw new Error("Expected atom");if(e.type===A.Number)return this.lexer.advance(),new Ce(e.value);if(e.type===A.Symbol&&"("===e.value)return this.parseParenthesisExpression();throw new Error("Unexpected token")}}]),e}(),Re=n(155),We=Object(g.a)((function(e){return{root:{marginTop:e.spacing(2),padding:e.spacing(2)},headerIcon:{marginRight:e.spacing(1)},header:{display:"flex",alignItems:"center"},alert:{marginTop:e.spacing(1)},result:{padding:e.spacing(1),backgroundColor:"#f5f5f5"}}})),De=function(){var e=We(),t=Object(r.useState)(""),n=Object(c.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(null),s=Object(c.a)(o,2),u=s[0],m=s[1],p=Object(r.useState)(null),d=Object(c.a)(p,2),f=d[0],v=d[1];return i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement("div",{className:e.header},i.a.createElement(Pe.a,{fontSize:"large",className:e.headerIcon}),i.a.createElement(h.a,{variant:"h5"},"Calculator")),f&&i.a.createElement(Re.a,{severity:"error",className:e.alert},f),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{var t=function(e){var t=new Te(e),n=new Ae(t).parseExpression();return n?n.value():null}(a);m(t)}catch(n){v(n.message||n.toString())}}},i.a.createElement(te.a,{variant:"outlined",fullWidth:!0,margin:"normal"},i.a.createElement(ne.a,{htmlFor:"calculator-input"},"Input"),i.a.createElement(Se.a,{id:"calculator-input",value:a,onChange:function(e){l(e.target.value)},endAdornment:i.a.createElement(K.a,{position:"end"},i.a.createElement(M.a,{color:"primary",variant:"contained",size:"large",type:"submit"},"=")),labelWidth:40}))),u&&i.a.createElement(x.a,{elevation:2,className:e.result},i.a.createElement(h.a,{variant:"subtitle1"}," = ",u)))},qe=Object(g.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},container:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),Le=function(){var e=qe(),t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],l=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,null),i.a.createElement(u.a,{position:"sticky"},i.a.createElement(m.a,null,i.a.createElement(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)}},i.a.createElement(E.a,null)),i.a.createElement(h.a,{variant:"h6",className:e.title},"Check Splitter"))),i.a.createElement(ye,{open:a,closeCallback:function(){return l(!1)}}),i.a.createElement(d.a,{fixed:!0,className:e.container},i.a.createElement(_,null),i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,xs:12,sm:4},i.a.createElement(Z,null)),i.a.createElement(f.a,{item:!0,xs:12,sm:8},i.a.createElement(ce,null))),i.a.createElement(De,null),i.a.createElement(Oe,null)))},_e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Be(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Fe=n(58),Ue=n(31),ze=Object(Ue.combineReducers)({people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PERSON":var n={name:t.name,basePrice:t.basePrice};return[].concat(Object(Fe.a)(e),[n]);case"RESET_STATE":return[];default:return e}},expenses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":var n={id:e.counter,name:t.name,kind:t.kind,payload:t.payload};return{counter:e.counter+1,expenses:[].concat(Object(Fe.a)(e.expenses),[n])};case"REMOVE_EXPENSE":return{counter:e.counter,expenses:e.expenses.filter((function(e){return e.id!==t.id}))};case"RESET_STATE":return G;default:return e}}}),Me=n(75),He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"check-splitter-state";try{var t=window.localStorage.getItem(e);if(!t)return null;var n=t?JSON.parse(t):null;return"version"in n&&1===n.version?n.state:null}catch(a){return console.error(a),null}}()||void 0,Je=Object(Ue.createStore)(ze,He,Object(Me.composeWithDevTools)());Je.subscribe((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"check-splitter-state",n={version:1,state:e};try{window.localStorage.setItem(t,JSON.stringify(n))}catch(a){console.error(a)}}(Je.getState())})),o.a.render(i.a.createElement(N.a,{store:Je},i.a.createElement(Le,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/check-splitter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/check-splitter","/service-worker.js");_e?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Be(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Be(t,e)}))}}()}},[[83,1,2]]]);
//# sourceMappingURL=main.8ca21d67.chunk.js.map