(this["webpackJsonpcheck-splitter"]=this["webpackJsonpcheck-splitter"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),l=n(8),o=n.n(l),c=n(24),u=n(160),s=n(161),m=n(162),p=n(155),h=n(53),d=n(163),f=n(153),v=n(83),E=n.n(v),g=n(140),b=n(4),y=n(168),k=n(139),x=n(104),w=n(141),O=n(142),S=n(143),j=n(144),P=n(145),N=n(146),T=n(14),I=n(72),C=n(35),A=n(36);function R(e){switch(e){case a.Percentage:return"Percentage";case a.SplitEqually:return"Split Equally";case a.SplitProportionally:return"Split Proportionally"}}!function(e){e[e.Percentage=0]="Percentage",e[e.SplitEqually=1]="SplitEqually",e[e.SplitProportionally=2]="SplitProportionally"}(a||(a={}));var W,D=function(){function e(t){Object(C.a)(this,e),this.person=void 0,this.expenses=void 0,this.total=void 0,this.person=t,this.expenses=[],this.total=0}return Object(A.a)(e,[{key:"getCurrentTotalPrice",value:function(){return this.person.basePrice+this.expenses.reduce((function(e,t){return e+t}),0)}},{key:"addExpense",value:function(e){this.expenses.push(e)}},{key:"finalize",value:function(){this.total=this.getCurrentTotalPrice()}}]),e}(),q=function(e,t){var n,r=e.length,i=e.map((function(e){return e.basePrice})).reduce((function(e,t){return e+t}),0),l=e.map((function(e){return new D(e)})),o=Object(I.a)(t);try{var c=function(){var e=n.value,t=void 0;switch(e.kind){case a.Percentage:t=l.map((function(t){return e.payload*t.getCurrentTotalPrice()/100}));break;case a.SplitEqually:t=Array.from({length:r},(function(){return e.payload/r}));break;case a.SplitProportionally:t=l.map((function(t){return t.person.basePrice/i*e.payload}))}var o=function(e,t){for(var n=e.map((function(e){return Math.floor(e)})),a=t-n.reduce((function(e,t){return e+t}),0),r=0;r<a;r++)n[r]+=1;return n}(t,e.payload);l.forEach((function(e,t){e.addExpense(o[t])}))};for(o.s();!(n=o.n()).done;)c()}catch(u){o.e(u)}finally{o.f()}return l.forEach((function(e){return e.finalize()})),l},L=function(e){return e.people},M=function(e){return e.expenses.expenses},_=Object(b.a)((function(e){return Object(y.a)({head:{backgroundColor:e.palette.secondary.main,color:e.palette.common.white,fontWeight:"bold"},footer:{color:e.palette.primary.main,fontWeight:"bold",fontSize:"1.1em"}})}))(k.a),B=Object(g.a)((function(e){return{root:{width:"100%",marginBottom:e.spacing(2)},table:{maxHeight:"50vh"}}})),F=function(e){return(e/100).toFixed(2)},U=function(){var e=B(),t=Object(T.c)(L),n=Object(T.c)(M),a=q(t,n),r=a.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0);return i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement(w.a,{className:e.table},i.a.createElement(O.a,{stickyHeader:!0},i.a.createElement(S.a,null,i.a.createElement(j.a,null,i.a.createElement(_,{align:"left"},"Name"),i.a.createElement(_,{align:"right"},"Base Price"),n.map((function(e,t){return i.a.createElement(_,{align:"right",key:t},e.name)})),i.a.createElement(_,{align:"right"},"Total"))),i.a.createElement(P.a,null,a.map((function(e,t){return i.a.createElement(j.a,{key:t},i.a.createElement(k.a,{align:"left"},e.person.name),i.a.createElement(k.a,{align:"right"},F(e.person.basePrice)),e.expenses.map((function(e,t){return i.a.createElement(k.a,{align:"right",key:t},F(e))})),i.a.createElement(k.a,{align:"right"},F(e.total)))}))),i.a.createElement(N.a,null,i.a.createElement(j.a,null,i.a.createElement(_,{align:"left"},"Total"),i.a.createElement(_,{align:"right",colSpan:n.length+2},F(r)))))))},z=n(28),H=n(169),J=n(78),X=n.n(J),$=n(147),V=n(76),G=n.n(V),K=function(){return i.a.createElement($.a,{color:"primary",variant:"contained",size:"large",type:"submit",startIcon:i.a.createElement(G.a,null)},"Add")},Q=Object(g.a)((function(e){return{root:{padding:e.spacing(2)},headerIcon:{marginRight:e.spacing(1)},header:{display:"flex",alignItems:"center"}}})),Y=function(e){var t=e.title,n=e.Icon,a=e.handleSubmit,r=e.children,l=Q();return i.a.createElement(x.a,{elevation:3,className:l.root},i.a.createElement("div",{className:l.header},i.a.createElement(n,{fontSize:"large",className:l.headerIcon}),i.a.createElement(h.a,{variant:"h5"},t)),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&a(e)}},r,i.a.createElement(K,null)))},Z={counter:0,expenses:[]},ee=n(152),te=function(e){var t=e.label,n=e.name,a=e.percentage,r=e.value,l=e.handleChange,o=function(e){var t=parseFloat(e.target.value);isNaN(t)&&(t=void 0),l(t)};return a?i.a.createElement(H.a,{label:t,variant:"outlined",margin:"normal",name:n,fullWidth:!0,InputProps:{endAdornment:i.a.createElement(ee.a,{position:"end"},"%")},InputLabelProps:{shrink:!0},type:"number",inputProps:{min:0,max:100},value:r||"",onChange:o}):i.a.createElement(H.a,{label:t,variant:"outlined",margin:"normal",name:n,value:r||"",fullWidth:!0,InputProps:{startAdornment:i.a.createElement(ee.a,{position:"start"},"$")},type:"number",onChange:o})},ne=function(e){var t=e.title,n=e.editId,a=Object(r.useState)({name:""}),l=Object(c.a)(a,2),o=l[0],u=l[1],s=Object(T.b)();return i.a.createElement(Y,{title:t,Icon:X.a,handleSubmit:function(){var e,t;""!==o.name&&o.basePrice&&o.basePrice>0&&(n?console.log("Edit dispatch: "+n):s((e=o.name,t=o.basePrice,{type:"ADD_PERSON",name:e,basePrice:t})),u({name:"",basePrice:void 0}))}},i.a.createElement(H.a,{label:"Name",variant:"outlined",margin:"normal",name:"name",value:o.name,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target.value;u((function(e){return Object(z.a)({},e,{name:t})}))}}),i.a.createElement(te,{label:"Base Price",name:"basePrice",value:o.basePrice,handleChange:function(e){u((function(t){return Object(z.a)({},t,{basePrice:e})}))}}))},ae=function(){return i.a.createElement(ne,{title:"Add a new person"})},re=n(50),ie=n(150),le=n(171),oe=n(164),ce=n(154),ue=n(79),se=n.n(ue),me=Object(g.a)((function(e){return{formRow:{display:"flex",justifyContent:"space-between"},formRowItemLeft:Object(re.a)({},e.breakpoints.up("sm"),{paddingRight:e.spacing(1)}),formRowItemRight:Object(re.a)({},e.breakpoints.up("sm"),{paddingLeft:e.spacing(1)})}})),pe=function(){var e=me(),t=Object(r.useState)({name:"",kind:a.SplitEqually}),n=Object(c.a)(t,2),l=n[0],o=n[1],u=Object(T.b)();return i.a.createElement(Y,{title:"Add a new expense",Icon:se.a,handleSubmit:function(){var e,t,n;""!==l.name&&l.payload&&l.payload&&(u((e=l.name,t=l.kind,n=l.payload,{type:"ADD_EXPENSE",name:e,kind:t,payload:n})),o({name:"",kind:a.SplitEqually,payload:void 0}))}},i.a.createElement(H.a,{label:"Name",name:"name",variant:"outlined",margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.name,onChange:function(e){if(e.target){var t=e.target.value;o((function(e){return Object(z.a)({},e,{name:t})}))}}}),i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,xs:12,sm:6,className:e.formRowItemLeft},i.a.createElement(ie.a,{margin:"normal",fullWidth:!0},i.a.createElement(le.a,{id:"kind-select-label",variant:"outlined"},"Kind"),i.a.createElement(oe.a,{labelId:"kind-select-label",labelWidth:40,fullWidth:!0,value:l.kind,variant:"outlined",onChange:function(e){var t=e.target.value;o((function(e){return Object(z.a)({},e,{kind:t})}))}},i.a.createElement(ce.a,{value:a.Percentage},"Percentage"),i.a.createElement(ce.a,{value:a.SplitEqually},"Split equally"),i.a.createElement(ce.a,{value:a.SplitProportionally},"Split proportionally")))),i.a.createElement(f.a,{item:!0,xs:12,sm:6,className:e.formRowItemRight},i.a.createElement(te,{label:"Price",name:"price",percentage:l.kind===a.Percentage,value:l.payload,handleChange:function(e){o((function(t){return Object(z.a)({},t,{payload:e})}))}}))))},he=n(80),de=n.n(he),fe=n(59),ve=n.n(fe),Ee=n(81),ge=n.n(Ee),be=n(167),ye=n(156),ke=n(151),xe=n(105),we=n(157),Oe=n(158),Se=Object(g.a)((function(e){return{drawerHeader:Object(z.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"})}})),je=function(){navigator.serviceWorker.getRegistration().then((function(e){e?e.unregister().then((function(){window.location.reload(!0)})):window.location.reload(!0)}))},Pe=function(e){var t=e.open,n=e.closeCallback,a=Se(),r=Object(T.b)();return i.a.createElement(be.a,{open:t},i.a.createElement("div",{className:a.drawerHeader},i.a.createElement(p.a,{onClick:n},i.a.createElement(de.a,null))),i.a.createElement(ye.a,null),i.a.createElement(ke.a,null,i.a.createElement(xe.a,{button:!0,onClick:function(){r({type:"RESET_STATE"}),n()}},i.a.createElement(we.a,null,i.a.createElement(ve.a,null)),i.a.createElement(Oe.a,{primary:"Reset"})),i.a.createElement(xe.a,{button:!0,onClick:je},i.a.createElement(we.a,null,i.a.createElement(ge.a,null)),i.a.createElement(Oe.a,{primary:"Update and reload"}))))},Ne=n(159),Te=Object(g.a)((function(e){return{root:{marginTop:e.spacing(2)}}})),Ie=function(e){var t=e.expense,n="".concat(t.name,": ").concat(function(e,t){if(e===a.Percentage)return"".concat(t,"%");var n=(Math.abs(t)/100).toFixed(2);return t>=0?"$".concat(n):"-$".concat(n)}(t.kind,t.payload)),r=Object(T.b)();return i.a.createElement(xe.a,null,i.a.createElement(Oe.a,{primary:n,secondary:R(t.kind)}),i.a.createElement(Ne.a,null,i.a.createElement(p.a,{edge:"end",onClick:function(){r({type:"REMOVE_EXPENSE",id:t.id})}},i.a.createElement(ve.a,null))))},Ce=function(){var e=Te(),t=Object(T.c)(M);return 0===t.length?null:i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement(ke.a,null,t.map((function(e){return i.a.createElement(Ie,{expense:e,key:e.id})}))))},Ae=n(170),Re=n(82),We=n.n(Re);!function(e){e[e.Number=0]="Number",e[e.Symbol=1]="Symbol",e[e.Operator=2]="Operator"}(W||(W={}));var De=/^\d+(\.\d+)?/,qe=function(){function e(t){Object(C.a)(this,e),this.input=void 0,this.currentIndex=void 0,this.bufferToken=void 0,this.input=t,this.currentIndex=0}return Object(A.a)(e,[{key:"currentChar",value:function(){return this.input[this.currentIndex]}},{key:"eatWhitespaces",value:function(){for(;this.currentIndex<this.input.length&&0===this.currentChar().trim().length;)this.currentIndex+=1}},{key:"innerNextToken",value:function(){if(this.eatWhitespaces(),this.currentIndex>=this.input.length)return null;var e=this.currentChar();if("("===e||")"===e)return this.currentIndex+=1,{type:W.Symbol,value:e};if("+"===e||"-"===e||"*"===e||"/"===e)return this.currentIndex+=1,{type:W.Operator,value:e};var t=this.input.substring(this.currentIndex).match(De);if(t){var n=t[0];this.currentIndex+=n.length;var a=parseFloat(n);return{type:W.Number,value:a}}throw new Error("Unknown character in input string: '".concat(e,"'"))}},{key:"nextToken",value:function(){if(this.bufferToken){var e=this.bufferToken;return this.bufferToken=void 0,e}return this.innerNextToken()}},{key:"peekToken",value:function(){if(this.bufferToken)return this.bufferToken;var e=this.innerNextToken();return e&&(this.bufferToken=e),e}},{key:"advance",value:function(){this.nextToken()}}]),e}(),Le=function(){function e(t,n,a){Object(C.a)(this,e),this.lhs=void 0,this.rhs=void 0,this.op=void 0,this.lhs=t,this.rhs=n,this.op=a}return Object(A.a)(e,[{key:"value",value:function(){switch(this.op){case"*":return this.lhs.value()*this.rhs.value();case"+":return this.lhs.value()+this.rhs.value();case"-":return this.lhs.value()-this.rhs.value();case"/":return this.lhs.value()/this.rhs.value()}}}]),e}(),Me=function(){function e(t){Object(C.a)(this,e),this.literal=void 0,this.literal=t}return Object(A.a)(e,[{key:"value",value:function(){return this.literal}}]),e}(),_e=function(){function e(t){Object(C.a)(this,e),this.lexer=void 0,this.lexer=t}return Object(A.a)(e,[{key:"expect",value:function(e,t){var n=this.lexer.nextToken();if(!n||n.type!==e||n.value!==t)throw new Error("Unexpected token")}},{key:"parseExpression",value:function(){return this.lexer.peekToken()?this.parseAddExpression():null}},{key:"parseParenthesisExpression",value:function(){this.expect(W.Symbol,"(");var e=this.parseExpression();if(!e)throw new Error("Unexpected EOL");return this.expect(W.Symbol,")"),e}},{key:"parseAddExpression",value:function(){for(var e=this.parseMulExpression();;){var t=this.lexer.peekToken();if(!t||t.type!==W.Operator||"+"!==t.value&&"-"!==t.value)break;this.lexer.advance();var n=this.parseMulExpression();e=new Le(e,n,t.value)}return e}},{key:"parseMulExpression",value:function(){for(var e=this.parseAtom();;){var t=this.lexer.peekToken();if(!t||t.type!==W.Operator||"*"!==t.value&&"/"!==t.value)break;this.lexer.advance();var n=this.parseAtom();e=new Le(e,n,t.value)}return e}},{key:"parseAtom",value:function(){var e=this.lexer.peekToken();if(!e)throw new Error("Expected atom");if(e.type===W.Number)return this.lexer.advance(),new Me(e.value);if(e.type===W.Symbol&&"("===e.value)return this.parseParenthesisExpression();throw new Error("Unexpected token")}}]),e}(),Be=n(166),Fe=Object(g.a)((function(e){return{root:{marginTop:e.spacing(2),padding:e.spacing(2)},headerIcon:{marginRight:e.spacing(1)},header:{display:"flex",alignItems:"center"},alert:{marginTop:e.spacing(1)},result:{padding:e.spacing(1),backgroundColor:"#f5f5f5"}}})),Ue=function(){var e=Fe(),t=Object(r.useState)(""),n=Object(c.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(null),u=Object(c.a)(o,2),s=u[0],m=u[1],p=Object(r.useState)(null),d=Object(c.a)(p,2),f=d[0],v=d[1];return i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement("div",{className:e.header},i.a.createElement(We.a,{fontSize:"large",className:e.headerIcon}),i.a.createElement(h.a,{variant:"h5"},"Calculator")),f&&i.a.createElement(Be.a,{severity:"error",className:e.alert},f),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{var t=function(e){var t=new qe(e),n=new _e(t).parseExpression();return n?n.value():null}(a);m(t)}catch(n){v(n.message||n.toString())}}},i.a.createElement(ie.a,{variant:"outlined",fullWidth:!0,margin:"normal"},i.a.createElement(le.a,{htmlFor:"calculator-input"},"Input"),i.a.createElement(Ae.a,{id:"calculator-input",value:a,onChange:function(e){l(e.target.value)},endAdornment:i.a.createElement(ee.a,{position:"end"},i.a.createElement($.a,{color:"primary",variant:"contained",size:"large",type:"submit"},"=")),labelWidth:40}))),s&&i.a.createElement(x.a,{elevation:2,className:e.result},i.a.createElement(h.a,{variant:"subtitle1"}," = ",s.toFixed(2))))},ze=Object(g.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},container:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),He=function(){var e=ze(),t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],l=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null),i.a.createElement(s.a,{position:"sticky"},i.a.createElement(m.a,null,i.a.createElement(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)}},i.a.createElement(E.a,null)),i.a.createElement(h.a,{variant:"h6",className:e.title},"Check Splitter"))),i.a.createElement(Pe,{open:a,closeCallback:function(){return l(!1)}}),i.a.createElement(d.a,{fixed:!0,className:e.container},i.a.createElement(U,null),i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,sm:12,md:4},i.a.createElement(ae,null)),i.a.createElement(f.a,{item:!0,sm:12,md:8},i.a.createElement(pe,null))),i.a.createElement(Ue,null),i.a.createElement(Ce,null)))},Je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Xe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var $e=n(64),Ve=function(e){return function(e){var t=+e.toFixed(8),n=Math.floor(t),a=t-n;return a>.5-1e-8&&a<.5+1e-8?n%2===0?n:n+1:Math.round(t)}(100*e)},Ge=n(31),Ke=Object(Ge.combineReducers)({people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PERSON":var n={name:t.name,basePrice:Ve(t.basePrice)};return[].concat(Object($e.a)(e),[n]);case"RESET_STATE":return[];default:return e}},expenses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":var n=t.kind===a.Percentage?t.payload:Ve(t.payload),r={id:e.counter,name:t.name,kind:t.kind,payload:n};return{counter:e.counter+1,expenses:[].concat(Object($e.a)(e.expenses),[r])};case"REMOVE_EXPENSE":return{counter:e.counter,expenses:e.expenses.filter((function(e){return e.id!==t.id}))};case"RESET_STATE":return Z;default:return e}}}),Qe=n(84),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"check-splitter-state";try{var t=window.localStorage.getItem(e);if(!t)return null;var n=t?JSON.parse(t):null;return"version"in n&&2===n.version?n.state:null}catch(a){return console.error(a),null}}()||void 0,Ze=Object(Ge.createStore)(Ke,Ye,Object(Qe.composeWithDevTools)());Ze.subscribe((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"check-splitter-state",n={version:2,state:e};try{window.localStorage.setItem(t,JSON.stringify(n))}catch(a){console.error(a)}}(Ze.getState())})),o.a.render(i.a.createElement(T.a,{store:Ze},i.a.createElement(He,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/check-splitter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/check-splitter","/service-worker.js");Je?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Xe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Xe(t,e)}))}}()},92:function(e,t,n){e.exports=n(103)}},[[92,1,2]]]);
//# sourceMappingURL=main.efe9f43a.chunk.js.map