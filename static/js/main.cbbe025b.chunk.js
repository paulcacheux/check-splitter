(this["webpackJsonpcheck-splitter"]=this["webpackJsonpcheck-splitter"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),l=n(8),o=n.n(l),c=n(17),u=n(161),s=n(162),m=n(163),p=n(153),d=n(52),h=n(164),f=n(155),v=n(84),E=n.n(v),g=n(141),b=n(4),y=n(169),k=n(147),x=n(105),O=n(148),w=n(149),S=n(150),P=n(151),j=n(152),I=n(154),N=n(14),T=n(73),C=n(35),R=n(36);function A(e){switch(e){case a.Percentage:return"Percentage";case a.SplitEqually:return"Split Equally";case a.SplitProportionally:return"Split Proportionally"}}!function(e){e[e.Percentage=0]="Percentage",e[e.SplitEqually=1]="SplitEqually",e[e.SplitProportionally=2]="SplitProportionally"}(a||(a={}));var W,D=function(){function e(t){Object(C.a)(this,e),this.person=void 0,this.expenses=void 0,this.total=void 0,this.person=t,this.expenses=[],this.total=0}return Object(R.a)(e,[{key:"getCurrentTotalPrice",value:function(){return this.person.basePrice+this.expenses.reduce((function(e,t){return e+t}),0)}},{key:"addExpense",value:function(e){this.expenses.push(e)}},{key:"finalize",value:function(){this.total=this.getCurrentTotalPrice()}}]),e}(),_=function(e,t){var n,r=e.length,i=e.map((function(e){return e.basePrice})).reduce((function(e,t){return e+t}),0),l=e.map((function(e){return new D(e)})),o=Object(T.a)(t);try{var c=function(){var e=n.value,t=void 0;switch(e.kind){case a.Percentage:t=l.map((function(t){return e.payload*t.getCurrentTotalPrice()/100}));break;case a.SplitEqually:t=Array.from({length:r},(function(){return e.payload/r}));break;case a.SplitProportionally:t=l.map((function(t){return t.person.basePrice/i*e.payload}))}var o=function(e,t){for(var n=e.map((function(e){return Math.floor(e)})),a=t-n.reduce((function(e,t){return e+t}),0),r=0;r<a;r++)n[r]+=1;return n}(t,e.payload);l.forEach((function(e,t){e.addExpense(o[t])}))};for(o.s();!(n=o.n()).done;)c()}catch(u){o.e(u)}finally{o.f()}return l.forEach((function(e){return e.finalize()})),l},B=function(e){return e.people},q=function(e){return e.expenses.expenses},z=n(55),F=n.n(z),L=n(19),M=n(170),U=n(79),H=n.n(U),J=n(137),X=n(77),$=n.n(X),V=function(e){return e.edit?i.a.createElement(J.a,{color:"primary",variant:"contained",size:"large",type:"submit",startIcon:i.a.createElement(F.a,null)},"Edit"):i.a.createElement(J.a,{color:"primary",variant:"contained",size:"large",type:"submit",startIcon:i.a.createElement($.a,null)},"Add")},G=Object(g.a)((function(e){return{root:{padding:e.spacing(2)},headerIcon:{marginRight:e.spacing(1)},header:{display:"flex",alignItems:"center"}}})),K=function(e){var t=e.title,n=e.edit,a=e.Icon,r=e.handleSubmit,l=e.children,o=!0===n,c=G();return i.a.createElement(x.a,{elevation:3,className:c.root},i.a.createElement("div",{className:c.header},i.a.createElement(a,{fontSize:"large",className:c.headerIcon}),i.a.createElement(d.a,{variant:"h5"},t)),i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r&&r(e)}},l,i.a.createElement(V,{edit:o})))},Q={counter:0,expenses:[]},Y=n(146),Z=function(e){var t=e.label,n=e.name,a=e.percentage,r=e.value,l=e.handleChange,o=function(e){var t=parseFloat(e.target.value);isNaN(t)&&(t=void 0),l(t)};return a?i.a.createElement(M.a,{label:t,variant:"outlined",margin:"normal",name:n,fullWidth:!0,InputProps:{endAdornment:i.a.createElement(Y.a,{position:"end"},"%")},InputLabelProps:{shrink:!0},type:"number",inputProps:{min:0,max:100,step:.01},value:r||"",onChange:o}):i.a.createElement(M.a,{label:t,variant:"outlined",margin:"normal",name:n,value:r||"",fullWidth:!0,InputProps:{startAdornment:i.a.createElement(Y.a,{position:"start"},"$")},inputProps:{step:.01},type:"number",onChange:o})},ee=function(e){var t=e.title,n=e.editProps,a=void 0,l=null===n||void 0===n?void 0:n.currentPrice;l&&(a=l/100);var o=Object(r.useState)({name:(null===n||void 0===n?void 0:n.name)||"",basePrice:a}),u=Object(c.a)(o,2),s=u[0],m=u[1],p=Object(N.b)();return i.a.createElement(K,{title:t,Icon:H.a,handleSubmit:function(){var e,t;""!==s.name&&s.basePrice&&s.basePrice>0&&(p(n?(e=n.editId,t=s.basePrice,{type:"EDIT_PERSON",editId:e,newBasePrice:t}):function(e,t){return{type:"ADD_PERSON",name:e,basePrice:t}}(s.name,s.basePrice)),m({name:"",basePrice:void 0}),(null===n||void 0===n?void 0:n.handleDidSubmit)&&n.handleDidSubmit())},edit:void 0!==n},i.a.createElement(M.a,{label:"Name",variant:"outlined",margin:"normal",name:"name",value:s.name,fullWidth:!0,InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target.value;m((function(e){return Object(L.a)({},e,{name:t})}))}}),i.a.createElement(Z,{label:"Base Price",name:"basePrice",value:s.basePrice,handleChange:function(e){m((function(t){return Object(L.a)({},t,{basePrice:e})}))}}))},te=function(){return i.a.createElement(ee,{title:"Add a new person"})},ne=function(e){return i.a.createElement(ee,{title:"Edit",editProps:e})},ae=Object(b.a)((function(e){return Object(y.a)({head:{backgroundColor:e.palette.secondary.main,color:e.palette.common.white,fontWeight:"bold"},footer:{color:e.palette.primary.main,fontWeight:"bold",fontSize:"1.1em"}})}))(k.a),re=Object(g.a)((function(e){return{root:{width:"100%",marginBottom:e.spacing(2)},table:{maxHeight:"50vh"}}})),ie=function(e){return(e/100).toFixed(2)},le=function(){var e=re(),t=Object(r.useState)(null),n=Object(c.a)(t,2),a=n[0],l=n[1],o=Object(N.c)(B),u=Object(N.c)(q),s=_(o,u),m=s.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0);return i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement(O.a,{className:e.table},i.a.createElement(w.a,{stickyHeader:!0},i.a.createElement(S.a,null,i.a.createElement(P.a,null,i.a.createElement(ae,null),i.a.createElement(ae,{align:"left"},"Name"),i.a.createElement(ae,{align:"right"},"Base Price"),u.map((function(e,t){return i.a.createElement(ae,{align:"right",key:t},e.name)})),i.a.createElement(ae,{align:"right"},"Total"))),i.a.createElement(j.a,null,s.map((function(e,t){var n=i.a.createElement(P.a,null,i.a.createElement(k.a,{colSpan:4+e.expenses.length},i.a.createElement(ne,{editId:t,name:e.person.name,currentPrice:e.person.basePrice,handleDidSubmit:function(){return l(null)}})));return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(P.a,null,i.a.createElement(k.a,{padding:"checkbox"},i.a.createElement(p.a,{edge:"end",size:"small",onClick:function(){return function(e){l(null===e||a===e?null:e)}(t)}},i.a.createElement(F.a,null))),i.a.createElement(k.a,{align:"left"},e.person.name),i.a.createElement(k.a,{align:"right"},ie(e.person.basePrice)),e.expenses.map((function(e,t){return i.a.createElement(k.a,{align:"right",key:t},ie(e))})),i.a.createElement(k.a,{align:"right"},ie(e.total))),a===t&&n)}))),i.a.createElement(I.a,null,i.a.createElement(P.a,null,i.a.createElement(ae,null),i.a.createElement(ae,{align:"left"},"Total"),i.a.createElement(ae,{align:"right",colSpan:u.length+2},ie(m)))))))},oe=n(49),ce=n(144),ue=n(172),se=n(165),me=n(156),pe=n(80),de=n.n(pe),he=Object(g.a)((function(e){return{formRow:{display:"flex",justifyContent:"space-between"},formRowItemLeft:Object(oe.a)({},e.breakpoints.up("sm"),{paddingRight:e.spacing(1)}),formRowItemRight:Object(oe.a)({},e.breakpoints.up("sm"),{paddingLeft:e.spacing(1)})}})),fe=function(){var e=he(),t=Object(r.useState)({name:"",kind:a.SplitEqually}),n=Object(c.a)(t,2),l=n[0],o=n[1],u=Object(N.b)();return i.a.createElement(K,{title:"Add a new expense",Icon:de.a,handleSubmit:function(){var e,t,n;""!==l.name&&l.payload&&l.payload&&(u((e=l.name,t=l.kind,n=l.payload,{type:"ADD_EXPENSE",name:e,kind:t,payload:n})),o({name:"",kind:a.SplitEqually,payload:void 0}))}},i.a.createElement(M.a,{label:"Name",name:"name",variant:"outlined",margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.name,onChange:function(e){if(e.target){var t=e.target.value;o((function(e){return Object(L.a)({},e,{name:t})}))}}}),i.a.createElement(f.a,{container:!0},i.a.createElement(f.a,{item:!0,xs:12,sm:6,className:e.formRowItemLeft},i.a.createElement(ce.a,{margin:"normal",fullWidth:!0},i.a.createElement(ue.a,{id:"kind-select-label",variant:"outlined"},"Kind"),i.a.createElement(se.a,{labelId:"kind-select-label",labelWidth:40,fullWidth:!0,value:l.kind,variant:"outlined",onChange:function(e){var t=e.target.value;o((function(e){return Object(L.a)({},e,{kind:t})}))}},i.a.createElement(me.a,{value:a.Percentage},"Percentage"),i.a.createElement(me.a,{value:a.SplitEqually},"Split equally"),i.a.createElement(me.a,{value:a.SplitProportionally},"Split proportionally")))),i.a.createElement(f.a,{item:!0,xs:12,sm:6,className:e.formRowItemRight},i.a.createElement(Z,{label:"Price",name:"price",percentage:l.kind===a.Percentage,value:l.payload,handleChange:function(e){o((function(t){return Object(L.a)({},t,{payload:e})}))}}))))},ve=n(81),Ee=n.n(ve),ge=n(60),be=n.n(ge),ye=n(82),ke=n.n(ye),xe=n(168),Oe=n(157),we=n(145),Se=n(106),Pe=n(158),je=n(159),Ie=Object(g.a)((function(e){return{drawerHeader:Object(L.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"})}})),Ne=function(){navigator.serviceWorker.getRegistration().then((function(e){e?e.unregister().then((function(){window.location.reload(!0)})):window.location.reload(!0)}))},Te=function(e){var t=e.open,n=e.closeCallback,a=Ie(),r=Object(N.b)();return i.a.createElement(xe.a,{open:t},i.a.createElement("div",{className:a.drawerHeader},i.a.createElement(p.a,{onClick:n},i.a.createElement(Ee.a,null))),i.a.createElement(Oe.a,null),i.a.createElement(we.a,null,i.a.createElement(Se.a,{button:!0,onClick:function(){r({type:"RESET_STATE"}),n()}},i.a.createElement(Pe.a,null,i.a.createElement(be.a,null)),i.a.createElement(je.a,{primary:"Reset"})),i.a.createElement(Se.a,{button:!0,onClick:Ne},i.a.createElement(Pe.a,null,i.a.createElement(ke.a,null)),i.a.createElement(je.a,{primary:"Update and reload"}))))},Ce=n(160),Re=Object(g.a)((function(e){return{root:{marginTop:e.spacing(2)}}})),Ae=function(e){var t=e.expense,n="".concat(t.name,": ").concat(function(e,t){if(e===a.Percentage)return"".concat(t,"%");var n=(Math.abs(t)/100).toFixed(2);return t>=0?"$".concat(n):"-$".concat(n)}(t.kind,t.payload)),r=Object(N.b)();return i.a.createElement(Se.a,null,i.a.createElement(je.a,{primary:n,secondary:A(t.kind)}),i.a.createElement(Ce.a,null,i.a.createElement(p.a,{edge:"end",onClick:function(){r({type:"REMOVE_EXPENSE",id:t.id})}},i.a.createElement(be.a,null))))},We=function(){var e=Re(),t=Object(N.c)(q);return 0===t.length?null:i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement(we.a,null,t.map((function(e){return i.a.createElement(Ae,{expense:e,key:e.id})}))))},De=n(171),_e=n(83),Be=n.n(_e);!function(e){e[e.Number=0]="Number",e[e.Symbol=1]="Symbol",e[e.Operator=2]="Operator"}(W||(W={}));var qe=/^\d+(\.\d+)?/,ze=function(){function e(t){Object(C.a)(this,e),this.input=void 0,this.currentIndex=void 0,this.bufferToken=void 0,this.input=t,this.currentIndex=0}return Object(R.a)(e,[{key:"currentChar",value:function(){return this.input[this.currentIndex]}},{key:"eatWhitespaces",value:function(){for(;this.currentIndex<this.input.length&&0===this.currentChar().trim().length;)this.currentIndex+=1}},{key:"innerNextToken",value:function(){if(this.eatWhitespaces(),this.currentIndex>=this.input.length)return null;var e=this.currentChar();if("("===e||")"===e)return this.currentIndex+=1,{type:W.Symbol,value:e};if("+"===e||"-"===e||"*"===e||"/"===e)return this.currentIndex+=1,{type:W.Operator,value:e};var t=this.input.substring(this.currentIndex).match(qe);if(t){var n=t[0];this.currentIndex+=n.length;var a=parseFloat(n);return{type:W.Number,value:a}}throw new Error("Unknown character in input string: '".concat(e,"'"))}},{key:"nextToken",value:function(){if(this.bufferToken){var e=this.bufferToken;return this.bufferToken=void 0,e}return this.innerNextToken()}},{key:"peekToken",value:function(){if(this.bufferToken)return this.bufferToken;var e=this.innerNextToken();return e&&(this.bufferToken=e),e}},{key:"advance",value:function(){this.nextToken()}}]),e}(),Fe=function(){function e(t,n,a){Object(C.a)(this,e),this.lhs=void 0,this.rhs=void 0,this.op=void 0,this.lhs=t,this.rhs=n,this.op=a}return Object(R.a)(e,[{key:"value",value:function(){switch(this.op){case"*":return this.lhs.value()*this.rhs.value();case"+":return this.lhs.value()+this.rhs.value();case"-":return this.lhs.value()-this.rhs.value();case"/":return this.lhs.value()/this.rhs.value()}}}]),e}(),Le=function(){function e(t){Object(C.a)(this,e),this.literal=void 0,this.literal=t}return Object(R.a)(e,[{key:"value",value:function(){return this.literal}}]),e}(),Me=function(){function e(t){Object(C.a)(this,e),this.lexer=void 0,this.lexer=t}return Object(R.a)(e,[{key:"expect",value:function(e,t){var n=this.lexer.nextToken();if(!n||n.type!==e||n.value!==t)throw new Error("Unexpected token")}},{key:"parseExpression",value:function(){return this.lexer.peekToken()?this.parseAddExpression():null}},{key:"parseParenthesisExpression",value:function(){this.expect(W.Symbol,"(");var e=this.parseExpression();if(!e)throw new Error("Unexpected EOL");return this.expect(W.Symbol,")"),e}},{key:"parseAddExpression",value:function(){for(var e=this.parseMulExpression();;){var t=this.lexer.peekToken();if(!t||t.type!==W.Operator||"+"!==t.value&&"-"!==t.value)break;this.lexer.advance();var n=this.parseMulExpression();e=new Fe(e,n,t.value)}return e}},{key:"parseMulExpression",value:function(){for(var e=this.parseAtom();;){var t=this.lexer.peekToken();if(!t||t.type!==W.Operator||"*"!==t.value&&"/"!==t.value)break;this.lexer.advance();var n=this.parseAtom();e=new Fe(e,n,t.value)}return e}},{key:"parseAtom",value:function(){var e=this.lexer.peekToken();if(!e)throw new Error("Expected atom");if(e.type===W.Number)return this.lexer.advance(),new Le(e.value);if(e.type===W.Symbol&&"("===e.value)return this.parseParenthesisExpression();throw new Error("Unexpected token")}}]),e}(),Ue=n(167),He=Object(g.a)((function(e){return{root:{marginTop:e.spacing(2),padding:e.spacing(2)},headerIcon:{marginRight:e.spacing(1)},header:{display:"flex",alignItems:"center"},alert:{marginTop:e.spacing(1)},result:{padding:e.spacing(1),backgroundColor:"#f5f5f5"}}})),Je=function(){var e=He(),t=Object(r.useState)(""),n=Object(c.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(null),u=Object(c.a)(o,2),s=u[0],m=u[1],p=Object(r.useState)(null),h=Object(c.a)(p,2),f=h[0],v=h[1];return i.a.createElement(x.a,{className:e.root,elevation:3},i.a.createElement("div",{className:e.header},i.a.createElement(Be.a,{fontSize:"large",className:e.headerIcon}),i.a.createElement(d.a,{variant:"h5"},"Calculator")),f&&i.a.createElement(Ue.a,{severity:"error",className:e.alert},f),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{var t=function(e){var t=new ze(e),n=new Me(t).parseExpression();return n?n.value():null}(a);m(t)}catch(n){v(n.message||n.toString())}}},i.a.createElement(ce.a,{variant:"outlined",fullWidth:!0,margin:"normal"},i.a.createElement(ue.a,{htmlFor:"calculator-input"},"Input"),i.a.createElement(De.a,{id:"calculator-input",value:a,onChange:function(e){l(e.target.value)},endAdornment:i.a.createElement(Y.a,{position:"end"},i.a.createElement(J.a,{color:"primary",variant:"contained",size:"large",type:"submit"},"=")),labelWidth:40}))),s&&i.a.createElement(x.a,{elevation:2,className:e.result},i.a.createElement(d.a,{variant:"subtitle1"}," = ",s.toFixed(2))))},Xe=Object(g.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},container:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),$e=function(){var e=Xe(),t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],l=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null),i.a.createElement(s.a,{position:"sticky"},i.a.createElement(m.a,null,i.a.createElement(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)}},i.a.createElement(E.a,null)),i.a.createElement(d.a,{variant:"h6",className:e.title},"Check Splitter"))),i.a.createElement(Te,{open:a,closeCallback:function(){return l(!1)}}),i.a.createElement(h.a,{fixed:!0,className:e.container},i.a.createElement(le,null),i.a.createElement(f.a,{container:!0,spacing:3},i.a.createElement(f.a,{item:!0,sm:12,md:4},i.a.createElement(te,null)),i.a.createElement(f.a,{item:!0,sm:12,md:8},i.a.createElement(fe,null))),i.a.createElement(Je,null),i.a.createElement(We,null)))},Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ke=n(65),Qe=function(e){return function(e){var t=+e.toFixed(8),n=Math.floor(t),a=t-n;return a>.5-1e-8&&a<.5+1e-8?n%2===0?n:n+1:Math.round(t)}(100*e)},Ye=n(31),Ze=Object(Ye.combineReducers)({people:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PERSON":var n={name:t.name,basePrice:Qe(t.basePrice)};return[].concat(Object(Ke.a)(e),[n]);case"EDIT_PERSON":return e.map((function(e,n){return n===t.editId?Object(L.a)({},e,{basePrice:Qe(t.newBasePrice)}):e}));case"RESET_STATE":return[];default:return e}},expenses:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":var n=t.kind===a.Percentage?t.payload:Qe(t.payload),r={id:e.counter,name:t.name,kind:t.kind,payload:n};return{counter:e.counter+1,expenses:[].concat(Object(Ke.a)(e.expenses),[r])};case"REMOVE_EXPENSE":return{counter:e.counter,expenses:e.expenses.filter((function(e){return e.id!==t.id}))};case"RESET_STATE":return Q;default:return e}}}),et=n(85),tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"check-splitter-state";try{var t=window.localStorage.getItem(e);if(!t)return null;var n=t?JSON.parse(t):null;return"version"in n&&2===n.version?n.state:null}catch(a){return console.error(a),null}}()||void 0,nt=Object(Ye.createStore)(Ze,tt,Object(et.composeWithDevTools)());nt.subscribe((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"check-splitter-state",n={version:2,state:e};try{window.localStorage.setItem(t,JSON.stringify(n))}catch(a){console.error(a)}}(nt.getState())})),o.a.render(i.a.createElement(N.a,{store:nt},i.a.createElement($e,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/check-splitter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/check-splitter","/service-worker.js");Ve?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ge(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ge(t,e)}))}}()},93:function(e,t,n){e.exports=n(104)}},[[93,1,2]]]);
//# sourceMappingURL=main.cbbe025b.chunk.js.map